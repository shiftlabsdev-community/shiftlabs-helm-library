CronJob {{ include "cronjob.fullname" . }} has been deployed successfully!

1. Get CronJob status:
  kubectl get cronjob {{ include "cronjob.fullname" . }} -n {{ .Release.Namespace }}

2. View CronJob schedule:
  Schedule: {{ .Values.cronjob.schedule }}
  {{- if .Values.cronjob.timeZone }}
  Timezone: {{ .Values.cronjob.timeZone }}
  {{- end }}
  Concurrency Policy: {{ .Values.cronjob.concurrencyPolicy }}
  {{- if .Values.cronjob.suspend }}
  Status: SUSPENDED (will not create new jobs)
  {{- else }}
  Status: ACTIVE
  {{- end }}

3. List jobs created by this CronJob:
  kubectl get jobs --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/instance={{ .Release.Name }}"

4. View logs from the latest job:
  kubectl logs --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/instance={{ .Release.Name }}" --tail=100

5. Manually trigger a job:
  kubectl create job --from=cronjob/{{ include "cronjob.fullname" . }} {{ include "cronjob.fullname" . }}-manual-$(date +%s) -n {{ .Release.Namespace }}

6. Suspend/Resume CronJob:
  # Suspend
  kubectl patch cronjob {{ include "cronjob.fullname" . }} -n {{ .Release.Namespace }} -p '{"spec":{"suspend":true}}'

  # Resume
  kubectl patch cronjob {{ include "cronjob.fullname" . }} -n {{ .Release.Namespace }} -p '{"spec":{"suspend":false}}'

{{- if and .Values.ExternalSecret .Values.ExternalSecret.enabled }}
7. External Secret is enabled ({{ .Values.ExternalSecret.type }}):
  - Secret store: {{ .Values.ExternalSecret.name }}
  - Verify secret: kubectl get secret {{ include "cronjob.fullname" . }} -n {{ .Release.Namespace }}
{{- end }}

{{- if and .Values.networkPolicy .Values.networkPolicy.enabled }}
8. NetworkPolicy is enabled:
  - Check network policies: kubectl get networkpolicy {{ include "cronjob.fullname" . }} -n {{ .Release.Namespace }}
{{- end }}

{{- if and .Values.ingressGRPC .Values.ingressGRPC.enabled }}
gRPC Ingress:
{{- range $host := .Values.ingressGRPC.hosts }}
  {{- range .paths }}
  grpc{{ if $.Values.ingressGRPC.tls }}s{{ end }}://{{ $host.host }}{{ .path }}
  {{- end }}
{{- end }}
  - Controller: {{ .Values.ingressGRPC.controllerType | default "haproxy" }}
{{- end }}

{{- if and .Values.configmap .Values.configmap.enabled }}
ConfigMap:
  - Name: {{ include "cronjob.fullname" . }}
  {{- if .Values.configmap.fileData }}
  - Mounted files:
  {{- range .Values.configmap.fileData }}
    - {{ .mountPath }}/{{ .fileName }}
  {{- end }}
  {{- end }}
{{- end }}

{{- if and .Values.ingress .Values.ingress.enabled }}
Ingress Controller: {{ .Values.ingress.controllerType | default "haproxy" }}
{{- end }}

{{- if and .Values.metrics (or (and .Values.metrics.serviceMonitor .Values.metrics.serviceMonitor.enabled) (and .Values.metrics.podMonitor .Values.metrics.podMonitor.enabled)) }}
Metrics:
  {{- if and .Values.metrics.serviceMonitor .Values.metrics.serviceMonitor.enabled }}
  - ServiceMonitor: kubectl get servicemonitor {{ include "cronjob.fullname" . }} -n {{ .Release.Namespace }}
  {{- end }}
  {{- if and .Values.metrics.podMonitor .Values.metrics.podMonitor.enabled }}
  - PodMonitor: kubectl get podmonitor {{ include "cronjob.fullname" . }} -n {{ .Release.Namespace }}
  {{- end }}
{{- end }}

For more information, visit: https://github.com/shiftlabs/helm-library
